webpackJsonp([0,5],{1:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(3),r=n(s),u=o(4),a=n(u),i=o(2),l=n(i),d=function(){function t(){(0,r["default"])(this,t)}return(0,a["default"])(t,[{key:"fetch",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.author,o=void 0===e?"":e,n=t.pageIdx,s=void 0===n?1:n,r=t.quantity,u=void 0===r?10:r,a=t.msgId,i="/msg/";return a?i+=a:i=i+"?author="+o+"&pageIdx="+s+"&quantity="+u,(0,l["default"])({url:i})}},{key:"add",value:function(t){return(0,l["default"])({method:"post",url:"/msg",body:t})}},{key:"mod",value:function(t){var e=t.id;return delete t.msgId,(0,l["default"])({method:"put",url:"/msg/"+e,body:t})}},{key:"del",value:function(t){return(0,l["default"])({method:"delete",url:"/msg/"+t})}}]),t}();e["default"]=new d},21:function(t,e,o){var n,s;n=o(25),s=o(80),t.exports=n||{},t.exports.__esModule&&(t.exports=t.exports["default"]),s&&(("function"==typeof t.exports?t.exports.options||(t.exports.options={}):t.exports).template=s)},25:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(1),r=n(s);e["default"]={route:{canReuse:!1},data:function(){return{msg:{},isAddMode:!0}},ready:function(){var t=this;if(this.$route.path.startsWith("/msg/modify")){this.isAddMode=!1;var e=this.$route.params.msgId;console.info("[MsgForm:XHR] 请求 id 为 "+e+" 的 msg 数据"),r["default"].fetch({msgId:e}).then(function(e){return e&&e.author===t.$root.userData.username?void(t.msg=e):(setTimeout(function(){alert("非信息发布者无权修改")}),t.$router.replace("/msg"))})}},methods:{handleSubmit:function(){console.info("[MsgForm:XHR] 提交表单");var t=this.isAddMode?"add":"mod";r["default"][t](this.msg).then(this.jumpToDetailMsg)},jumpToDetailMsg:function(t){var e=t.id;console.info("[MsgForm:Route] 跳转到详情页"),this.$router.replace({name:"detailMsg",params:{msgId:e}})},goBack:function(){console.info("[MsgForm:Route] 返回上一层"),history.back()}}}},80:function(t,e){t.exports='<form @submit.prevent=handleSubmit> <div class=form-group> <label for=title>标题</label> <input type=text class=form-control id=title placeholder=请输入标题... v-model=msg.title /> </div> <div class=form-group> <label for=content>内容</label> <textarea id=content class=form-control rows=3 placeholder=请输入内容... v-model=msg.content></textarea> </div> <div role=group class="btn-group btn-group-justified"> <div class=btn-group role=group> <button type=button class="btn btn-warning" @click=goBack> <span class="glyphicon glyphicon-arrow-left"></span> 取消 </button> </div> <div class=btn-group role=group> <button type=submit class="btn btn-success"> 提交 <span class="glyphicon glyphicon-ok"></span> </button> </div> </div> </form>'}});